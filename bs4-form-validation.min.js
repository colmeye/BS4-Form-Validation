/* https://github.com/colmeye/BS4-Form-Validation */class Validation{constructor(s){this.form=$("#"+s),this.submitButton=$(this.form).find('input[type="submit"]'),this.submitButtonText=this.submitButton.val(),this.inputLog=[],this.validC="is-valid",this.invalidC="is-invalid",this.checkAll()}requireText(s,t,i,e,h){let a=$("#"+s),r="";return this.createAsterisk(a),this.inputLog.push(["requireText",s,t,i,e,h]),$(a).on("input focus",a,()=>{r="",r+=this.lengthCheck(a,t,i),r+=this.illegalCharCheck(a,e),this.showWarning(a,s,r)}),$(a).on("input",a,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(a).on("focusout",a,()=>{r+=this.necessaryCharCheck(a,h),this.showWarning(a,s,r),this.removeValid(a)}),r}requireEmail(s,t,i,e,h){let a=$("#"+s),r="";return this.createAsterisk(a),this.inputLog.push(["requireEmail",s,t,i,e,h]),$(a).on("input focus",a,()=>{r="",r+=this.lengthCheck(a,t,i),r+=this.illegalCharCheck(a,e),this.showWarning(a,s,r)}),$(a).on("input",a,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(a).on("focusout",a,()=>{r+=this.necessaryCharCheck(a,h),r+=this.emailCheck(a),this.showWarning(a,s,r),this.removeValid(a)}),r}registerPassword(s,t,i,e,h,a){let r=$("#"+s),n=$("#"+a),l="",o="";return this.createAsterisk(r),this.createAsterisk(n),this.inputLog.push(["registerPassword",s,t,i,e,h,a]),$(r).on("input focus",r,()=>{l="",l+=this.lengthCheck(r,t,i),l+=this.illegalCharCheck(r,e),this.showWarning(r,s,l),o="",o+=this.passwordMatchCheck(r,n),this.showWarning(n,a,o)}),$(r).on("input",r,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(r).on("focusout",r,()=>{l+=this.necessaryCharCheck(r,h),l+=this.numberCheck(r),l+=this.specialCharCheck(r),this.showWarning(r,s,l),this.removeValid(r),this.removeValid(n)}),$(n).on("input focus",n,()=>{o="",o+=this.passwordMatchCheck(r,n),this.showWarning(n,a,o)}),$(n).on("input",r,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(n).on("focusout",n,()=>{this.removeValid(n)}),l}lengthCheck(s,t,i){return s.val().length<=t?"Must be longer than "+t+" characters. ":s.val().length>=i?"Must be shorter than "+i+" characters. ":""}illegalCharCheck(s,t){let i="";return $(t).each(function(){s.val().indexOf(this)>=0&&(0==!this.trim().length?i+=" "+this:i+=" spaces")}),""===i?"":"Cannot use:"+i+". "}necessaryCharCheck(s,t){let i="";return $(t).each(function(){s.val().indexOf(this)>=0||(i+=" "+this)}),""===i?"":"Must contain:"+i+". "}numberCheck(s){return s.val().match(/\d/)?"":"Must contain a number. "}specialCharCheck(s){return s.val().match(/\W|_/g)?"":"Must contain a special character. "}passwordMatchCheck(s,t){return s.val()===t.val()?"":"Passwords do not match. "}emailCheck(s){return s.val().match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?"":"Is not a proper email"}submitDisabled(s,t){$(this.submitButton).prop("disabled",s),$(this.submitButton).val(t)}checkAll(){$(this.form).submit(s=>{$(this.inputLog).each(t=>{let i="",e="",h=this.inputLog[t],a=h[1],r=$("#"+a),n=h[2],l=h[3],o=h[4],c=h[5];if("registerPassword"===h[0])var u=h[6],C=$("#"+u);i="",i+=this.lengthCheck(r,n,l),i+=this.illegalCharCheck(r,o),i+=this.necessaryCharCheck(r,c),"requireEmail"===h[0]&&(i+=this.emailCheck(r)),"registerPassword"===h[0]&&(i+=this.specialCharCheck(r),i+=this.numberCheck(r),e+=this.passwordMatchCheck(r,C)),i&&(this.showWarning(r,a,i),this.submitDisabled(!0,"Error, please check your form"),s.preventDefault()),e&&(this.showWarning(C,u,e),this.submitDisabled(!0,"Error, please check your form"),s.preventDefault())})})}showWarning(s,t,i){i?(this.generateFeedback(s,t,"invalid-feedback",i),this.makeInvalid(s)):(this.generateFeedback(s,t,"",""),this.makeValid(s))}makeValid(s){s.hasClass(this.validC)||s.addClass(this.validC),s.hasClass(this.invalidC)&&s.removeClass(this.invalidC)}removeValid(s){s.hasClass(this.validC)&&s.removeClass(this.validC)}makeInvalid(s){s.hasClass(this.invalidC)||s.addClass(this.invalidC),s.hasClass(this.validC)&&s.removeClass(this.validC)}createAsterisk(s){$("<span class='text-danger'>*</span>").insertBefore(s)}generateFeedback(s,t,i,e){$("#"+t+"-feedback").remove(),$('<div id="'+t+'-feedback" class="'+i+'">'+e+"</div>").insertAfter(s)}}