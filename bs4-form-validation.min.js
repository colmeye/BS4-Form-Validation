/* Instructions and info at: https://github.com/colmeye/BS4-Form-Validation */class Validation{constructor(s){this.form=$('form[name ="'+s+'"]'),this.submitButton=$(this.form).find('input[type="submit"]'),this.submitButtonText=this.submitButton.val(),this.inputLog=[],this.validC="is-valid",this.invalidC="is-invalid",this.checkAll()}requireText(s,t,i,e,a){let h=$("#"+s),r="";return this.createAsterisk(h),this.inputLog.push(["requireText",s,t,i,e,a]),$(h).on("input focus",h,()=>{r="",r+=this.lengthCheck(h,t,i),r+=this.illegalCharCheck(h,e),this.showWarning(h,s,r)}),$(h).on("input",h,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(h).on("focusout",h,()=>{r+=this.necessaryCharCheck(h,a),this.showWarning(h,s,r),this.removeValid(h)}),r}requireEmail(s,t,i,e,a){let h=$("#"+s),r="";return this.createAsterisk(h),this.inputLog.push(["requireText",s,t,i,e,a]),$(h).on("input focus",h,()=>{r="",r+=this.lengthCheck(h,t,i),r+=this.illegalCharCheck(h,e),this.showWarning(h,s,r)}),$(h).on("input",h,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(h).on("focusout",h,()=>{r+=this.necessaryCharCheck(h,a),r+=this.emailCheck(h),this.showWarning(h,s,r),this.removeValid(h)}),r}registerPassword(s,t,i,e,a,h){let r=$("#"+s),n=$("#"+h),l="",o="";return this.createAsterisk(r),this.createAsterisk(n),this.inputLog.push(["registerPassword",s,t,i,e,a,h]),$(r).on("input focus",r,()=>{l="",l+=this.lengthCheck(r,t,i),l+=this.illegalCharCheck(r,e),this.showWarning(r,s,l),o="",o+=this.passwordMatchCheck(r,n),this.showWarning(n,h,o)}),$(r).on("input",r,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(r).on("focusout",r,()=>{l+=this.necessaryCharCheck(r,a),l+=this.numberCheck(r),l+=this.specialCharCheck(r),this.showWarning(r,s,l),this.removeValid(r),this.removeValid(n)}),$(n).on("input focus",n,()=>{o="",o+=this.passwordMatchCheck(r,n),this.showWarning(n,h,o)}),$(n).on("input",r,()=>{this.submitDisabled(!1,this.submitButtonText)}),$(n).on("focusout",n,()=>{this.removeValid(n)}),l}lengthCheck(s,t,i){return s.val().length<=t?"Must be longer than "+t+" characters. ":s.val().length>=i?"Must be shorter than "+i+" characters. ":""}illegalCharCheck(s,t){let i="";return $(t).each(function(){s.val().indexOf(this)>=0&&(0==!this.trim().length?i+=" "+this:i+=" spaces")}),""===i?"":"Cannot use:"+i+". "}necessaryCharCheck(s,t){let i="";return $(t).each(function(){s.val().indexOf(this)>=0||(i+=" "+this)}),""===i?"":"Must contain:"+i+". "}numberCheck(s){return s.val().match(/\d/)?"":"Must contain a number. "}specialCharCheck(s){return s.val().match(/\W|_/g)?"":"Must contain a special character. "}passwordMatchCheck(s,t){return s.val()===t.val()?"":"Passwords do not match. "}emailCheck(s){return s.val().match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?"":"Is not a proper email"}submitDisabled(s,t){$(this.submitButton).prop("disabled",s),$(this.submitButton).val(t)}checkAll(){$(this.form).submit(s=>{$(this.inputLog).each(t=>{let i="",e="",a=this.inputLog[t],h=a[1],r=$('input[name ="'+h+'"]'),n=a[2],l=a[3],o=a[4],c=a[5];if("registerPassword"===a[0])var u=a[6],d=$('input[name="'+u+'"]');i="",i+=this.lengthCheck(r,n,l),i+=this.illegalCharCheck(r,o),i+=this.necessaryCharCheck(r,c),"registerPassword"===a[0]&&(i+=this.specialCharCheck(r),e+=this.passwordMatchCheck(r,d)),i&&(this.showWarning(r,h,i),this.submitDisabled(!0,"Error, please check your form"),s.preventDefault()),e&&(this.showWarning(d,u,e),this.submitDisabled(!0,"Error, please check your form"),s.preventDefault())})})}showWarning(s,t,i){i?(this.generateFeedback(s,t,"invalid-feedback",i),this.makeInvalid(s)):(this.generateFeedback(s,t,"",""),this.makeValid(s))}makeValid(s){s.hasClass(this.validC)||s.addClass(this.validC),s.hasClass(this.invalidC)&&s.removeClass(this.invalidC)}removeValid(s){s.hasClass(this.validC)&&s.removeClass(this.validC)}makeInvalid(s){s.hasClass(this.invalidC)||s.addClass(this.invalidC),s.hasClass(this.validC)&&s.removeClass(this.validC)}createAsterisk(s){$("<span class='text-danger'>*</span>").insertBefore(s)}generateFeedback(s,t,i,e){$("#"+t+"-feedback").remove(),$('<div id="'+t+'-feedback" class="'+i+'">'+e+"</div>").insertAfter(s)}}